---
title: Collections
description: "Add data and search built into your functions"
---

{/* <!-- vale Google.Headings = NO --> */}

Search APIs integrate collections and models defined in your project's [manifest](../manifest).

<Tip>
  We're introducing new APIs consistently through ongoing development with build
  partners. [Let's chat](mailto:help@hypermode.com) about what would make the
  Functions SDK even more powerful for your next use case!
</Tip>

### upsert

Add a text to your collection and automatically index in the collections' search methods.

```TypeScript
upsert(
  collection: string,
  key: string | null,
  text: string,
): CollectionMutationResult
```

<ResponseField name="collection" type="string" required>
  Internal name of your collection as [defined in your
  manifest](../define-collections).
</ResponseField>

<ResponseField name="key" type="string">
  The key for your text, optionally provided. If not provided, a UUID will be
  generated.
</ResponseField>

<ResponseField name="text" type="string" required>
  The text being uploaded to the collection.
</ResponseField>

### upsertBatch

Add a group of texts to your collection, and automatically index in the collections' searchMethods.

```TypeScript
upsertBatch(
  collection: string,
  keys: string[] | null,
  texts: string[],
): CollectionMutationResult
```

<ResponseField name="collection" type="string" required>
  Internal name of your collection as [defined in your
  manifest](../define-collections).
</ResponseField>

<ResponseField name="keys" type="string[]">
  The keys for your texts, optionally provided. If not provided, a UUID will be
  generated for each text.
</ResponseField>

<ResponseField name="texts" type="string[]" required>
  The texts being uploaded to the collection.
</ResponseField>

### remove

remove a key and its corresponding text from the collection.

```TypeScript
remove(
  collection: string,
  key: string,
): CollectionMutationResult
```

<ResponseField name="collection" type="string" required>
  Internal name of your collection as [defined in your
  manifest](../define-collections).
</ResponseField>

<ResponseField name="key" type="string" required>
  The key to be deleted.
</ResponseField>

### search

Use natural language search on a text.

```TypeScript
search(
  collection: string,
  searchMethod: string,
  text: string,
  limit: i32,
  returnText: bool = false,
): CollectionSearchResult
```

<ResponseField name="collection" type="string" required>
  Internal name of your collection as [defined in your
  manifest](../define-collections).
</ResponseField>

<ResponseField name="searchMethod" type="string" required>
  The search method used to calculate embedding for text & search against.
</ResponseField>

<ResponseField name="text" type="string" required>
  The text to compute natural language search on.
</ResponseField>

<ResponseField name="limit" type="i32" required>
  The number of result objects to return.
</ResponseField>

<ResponseField name="returnText" type="bool">
  A flag to return the texts in the response.
</ResponseField>

### recomputeSearchMethod

Recompute the embeddings for all texts in a specific collection for a search method.

```TypeScript
recomputeSearchMethod(
  collection: string,
  searchMethod: string,
): SearchMethodMutationResult
```

<ResponseField name="collection" type="string" required>
  Internal name of your collection as [defined in your
  manifest](../define-collections).
</ResponseField>

<ResponseField name="searchMethod" type="string" required>
  The search method to recompute embeddings for.
</ResponseField>

### computeSimilarity

Compute similarity between two keys in a collection using a search method's embedder.

```TypeScript
computeSimilarity(
  collection: string,
  searchMethod: string,
  key1: string,
  key2: string,
): CollectionSearchResultObject
```

<ResponseField name="collection" type="string" required>
  Internal name of your collection as [defined in your
  manifest](../define-collections).
</ResponseField>

<ResponseField name="searchMethod" type="string" required>
  The search method used to calculate embedding for keys' texts.
</ResponseField>

<ResponseField name="key1, key2" type="string" required>
  Keys to compute similarity on.
</ResponseField>

### getText

Get text for a key from a collection.

```TypeScript
getText(collection: string, key: string): string
```

<ResponseField name="collection" type="string" required>
  Internal name of your collection as [defined in your
  manifest](../define-collections).
</ResponseField>

<ResponseField name="key" type="string" required>
  The key to be retrieved.
</ResponseField>

### getTexts

Get all keys and texts in a collection.

```TypeScript
getTexts(collection: string): Map<string, string>
```

<ResponseField name="collection" type="string" required>
  Internal name of your collection as [defined in your
  manifest](../define-collections).
</ResponseField>
