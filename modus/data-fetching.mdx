---
title: Data Fetching
description: "Pull data into your app"
---

Modus makes it simple to fetch data from external sources. The specific data source you're
retrieving from determines the method you use to interact with it.

## Fetching from databases

### PostgreSQL

PostgreSQL is a powerful, open source relational database system. Modus provides a simple way to
interact with PostgreSQL databases with the `postgresql` APIs.

Here is an example of fetching a person from a PostgreSQL database using the Modus SDK:

<CodeGroup>

```go Go
import github.com/hypermodeinc/modus/sdk/go/pkg/postgresql

// the name of the PostgreSQL connection, as specified in the modus.json manifest
const host = "my-database"

type Person struct {
  Id   int                  `json:"id"`
  Name string               `json:"name"`
  Age  int                  `json:"age"`
  Home *postgresql.Location `json:"home"`
}

func GetPerson(id int) (*Person, error) {
  const query = "select * from people where id = $1"
  rows, _, err := postgresql.Query[Person](host, query, id)
  if err != nil {
    return nil, err
  }

  if len(rows) == 0 {
    return nil, nil // Person not found
  }

  return &rows[0], nil
}
```

```ts AssemblyScript
import { postgresql } from "@hypermode/modus-sdk-as"

// the name of the PostgreSQL connection, as specified in the modus.json manifest
const host = "my-database"

@json
class Person {
  id: i32 = 0
  name!: string
  age!: i32
  home!: postgresql.Location | null
}

export function getPerson(id: i32): Person | null {
  const query = "select * from people where id = $1"

  const params = new postgresql.Params()
  params.push(id)

  const response = postgresql.query<Person>(host, query, params)
  return response.rows.length > 0 ? response.rows[0] : null
}
```

</CodeGroup>

### Dgraph

Dgraph is a distributed, transactional graph database. Modus offers an easy way to query and mutate
data in Dgraph with the `dgraph` APIs.

Here is an example of fetching a person from a Dgraph database using the Modus SDK:

<CodeGroup>

```go Go
import github.com/hypermodeinc/modus/sdk/go/pkg/dgraph

// the name of the Dgraph connection, as specified in the modus.json manifest
const hostName = "my-database"

type Person struct {
  Uid       string   `json:"uid,omitempty"`
  FirstName string   `json:"firstName,omitempty"`
  LastName  string   `json:"lastName,omitempty"`
  DType     []string `json:"dgraph.type,omitempty"`
}

func QuerySpecificPerson(firstName, lastName string) (*Person, error) {
  statement := `query queryPerson($firstName: string, $lastName: string) {
    people(func: eq(firstName, $firstName)) @filter(eq(lastName, $lastName)) {
      uid
      firstName
      lastName
      dgraph.type
    }
  }`

  variables := map[string]string{
    "$firstName": firstName,
    "$lastName":  lastName,
  }

  response, err := dgraph.Execute(hostName, &dgraph.Request{
    Query: &dgraph.Query{
      Query:     statement,
      Variables: variables,
    },
  })

  if err != nil {
    return nil, err
  }

  var peopleData PeopleData
  if err := json.Unmarshal([]byte(response.Json), &peopleData); err != nil {
    return nil, err
  }

  if len(peopleData.People) == 0 {
    return nil, nil // Person not found
  }

  return peopleData.People[0], nil
}
```

```ts AssemblyScript
import { dgraph } from "@hypermode/modus-sdk-as"
import { JSON } from "json-as"

// the name of the Dgraph connection, as specified in the modus.json manifest
const hostName: string = "my-database"

@json
class Person {
  constructor(
    uid: string = "",
    firstName: string = "",
    lastName: string = "",
    dType: string[] = [],
  ) {
    this.uid = uid
    this.firstName = firstName
    this.lastName = lastName
    this.dType = dType
  }
  uid: string = ""
  firstName: string = ""
  lastName: string = ""

  @alias("dgraph.type")
  dType: string[] = []
}

export function querySpecificPerson(firstName: string, lastName: string): Person | null {
  const statement = `  query queryPerson($firstName: string, $lastName: string) {
    people(func: eq(firstName, $firstName)) @filter(eq(lastName, $lastName)) {
        uid
        firstName
        lastName
    }
  }`

  const vars = new dgraph.Variables()
  vars.set("$firstName", firstName)
  vars.set("$lastName", lastName)

  const resp = dgraph.execute(hostName, new dgraph.Request(new dgraph.Query(statement, vars)))

  const people = JSON.parse<PeopleData>(resp.Json).people

  if (people.length === 0) return null
  return people[0]
}
```

</CodeGroup>

## Fetching from APIs

### HTTP

HTTP protocols underpin RESTful APIs with OpenAPI schemas. Modus provides a convenient way to
interact with any external HTTP API using the `http` APIs in the Modus SDK.

Here is an example of fetching a person from an HTTP API using the Modus SDK:

<CodeGroup>

```go Go

```

```ts AssemblyScript

```

</CodeGroup>

### GraphQL

GraphQL is a data-centric query language for APIs that allows you to fetch only the data you need.
With the `graphql` APIs in the Modus SDK, you can easily fetch data from any GraphQL endpoint.

Here is an example of fetching a person from a GraphQL API using the Modus SDK:

<CodeGroup>

```go Go
import github.com/hypermodeinc/modus/sdk/go/pkg/graphql

// the name of the GraphQL connection, as specified in the modus.json manifest
const hostName = "my-graphql-api"

type Person struct {
  FirstName string `json:"firstName,omitempty"`
  LastName  string `json:"lastName,omitempty"`
}

func QuerySpecificPerson(firstName, lastName string) (*Person, error) {
  statement := `query queryPeople($firstName: String!, $lastName: String!) {
    people: queryPerson(
      first: 1,
      filter: { firstName: { eq: $firstName }, lastName: { eq: $lastName } }
    ) {
      id
      firstName
      lastName
    }
  }`

  vars := map[string]any{
    "firstName": firstName,
    "lastName":  lastName,
  }

  response, err := graphql.Execute[PeopleData](hostName, statement, vars)
  if err != nil {
    return nil, err
  }

  if len(response.Data.People) == 0 {
    return nil, nil // Person not found
  }

  return response.Data.People[0], nil
}
```

```ts AssemblyScript
import { graphql } from "@hypermode/modus-sdk-as"

// the name of the GraphQL connection, as specified in the modus.json manifest
const hostName: string = "my-graphql-api"

@json
class Person {
  id: string | null = null
  firstName: string = ""
  lastName: string = ""
}

export function querySpecificPerson(firstName: string, lastName: string): Person | null {
  const statement = `query queryPeople($firstName: String!, $lastName: String!) {
    people: queryPerson(
        first: 1,
        filter: { firstName: { eq: $firstName }, lastName: { eq: $lastName } }
    ) {
        id
        firstName
        lastName
    }
  }`

  const vars = new graphql.Variables()
  vars.set("firstName", firstName)
  vars.set("lastName", lastName)

  const response = graphql.execute<PeopleData>(hostName, statement, vars)

  if (!response.data) return null

  const people = response.data!.people

  if (people.length === 0) return null
  return people[0]
}
```

</CodeGroup>
