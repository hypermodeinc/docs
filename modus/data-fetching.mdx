---
title: Data Fetching
description: "Pull data into your app"
---

Modus makes it simple to fetch data from external sources. The specific data source you're
retrieving from determines the method you use to interact with it.

## Fetching from databases

### PostgreSQL

PostgreSQL is a powerful, open source relational database system. Modus provides a simple way to
interact with PostgreSQL databases with the `postgresql` APIs.

Here is an example of fetching a person from a PostgreSQL database using the Modus SDK:

<CodeGroup>

```go Go
import github.com/hypermodeinc/modus/sdk/go/pkg/postgresql

// the name of the PostgreSQL connection, as specified in the modus.json manifest
const host = "my-database"

type Person struct {
  Id   int                  `json:"id"`
  Name string               `json:"name"`
  Age  int                  `json:"age"`
  Home *postgresql.Location `json:"home"`
}

func GetPerson(id int) (*Person, error) {
  const query = "select * from people where id = $1"
  rows, _, err := postgresql.Query[Person](host, query, id)
  if err != nil {
    return nil, err
  }

  if len(rows) == 0 {
    return nil, nil // Person not found
  }

  return &rows[0], nil
}
```

```ts AssemblyScript
import { postgresql } from "@hypermode/modus-sdk-as"

// the name of the PostgreSQL connection, as specified in the modus.json manifest
const host = "my-database"

@json
class Person {
  id: i32 = 0
  name!: string
  age!: i32
  home!: postgresql.Location | null
}

export function getPerson(id: i32): Person | null {
  const query = "select * from people where id = $1"

  const params = new postgresql.Params()
  params.push(id)

  const response = postgresql.query<Person>(host, query, params)
  return response.rows.length > 0 ? response.rows[0] : null
}
```

</CodeGroup>

### Dgraph

Dgraph is a distributed, transactional graph database. Modus offers an easy way to query and mutate
data in Dgraph with the `dgraph` APIs.

Here is an example of fetching a person from a Dgraph database using the Modus SDK:

<CodeGroup>

```go Go
import github.com/hypermodeinc/modus/sdk/go/pkg/dgraph

// the name of the Dgraph connection, as specified in the modus.json manifest
const hostName = "my-database"

// Declare struct used to parse the JSON document returned by Dgraph query.
type Person struct {
  Name string    `json:"name,omitempty"`
  Age  int32     `json:"age,omitempty"`
  Home *Location `json:"home,omitempty"`
}

// Dgraph location predicates follow GeoJSON format
type Location struct {
  Type        string    `json:"type,omitempty"`
  Coordinates []float32 `json:"coordinates,omitempty"`
}

type GetPersonResponse struct {
  Persons []*Person `json:"persons"`
}

func GetPerson(name string) (*Person, error) {
  statement := `
   query getPerson($name: string) {
    persons(func: eq(name, $name))  {
      name
      age
      home
    }
  }
  `
  variables := map[string]string{
    "$name": name,
  }

  response, err := dgraph.Execute(hostName, &dgraph.Request{
    Query: &dgraph.Query{
      Query:     statement,
      Variables: variables,
    },
  })
  if err != nil {
    return nil, err
  }

  var data GetPersonResponse
  if err := json.Unmarshal([]byte(response.Json), &data); err != nil {
    return nil, err
  }

  if len(data.Persons) == 0 {
    return nil, nil // Person not found
  }

  return data.Persons[0], nil
}

```

```ts AssemblyScript
import { dgraph } from "@hypermode/modus-sdk-as"
import { JSON } from "json-as"

// the name of the Dgraph connection, as specified in the modus.json manifest
const hostName: string = "my-dgraph"

// Declare  classes used to parse the JSON document returned by Dgraph query.
@json
class GetPersonResponse {
  persons: Person[] = []
}

@json
class Person {
  name: string = ""
  age: i32 = 0
  home: Location
}
// Dgraph location predicates follow GeoJSON format
@json
class Location {
  type: string = "Point"
  coordinates: f64[] = []
}

// Exposing getPerson in the generated GraphQL API

export function getPerson(name: string): Person | null {
  const statement = `  
  query getPerson($name: string) {
    persons(func: eq(name, $name))  {
        name
        age
        home
    }
  }`

  const vars = new dgraph.Variables()
  vars.set("$name", name)

  // Build the query from statement and variables
  // Execute the query

  const resp = dgraph.execute(hostName, new dgraph.Request(new dgraph.Query(statement, vars)))

  // Parse JSON response

  const persons = JSON.parse<GetPersonResponse>(resp.Json).persons
  if (persons.length == 0) {
    return null
  }
  return persons[0]
}
```

</CodeGroup>

## Fetching from APIs

### HTTP

HTTP protocols underpin RESTful APIs with OpenAPI schemas. Modus provides a convenient way to
interact with any external HTTP API using the `http` APIs in the Modus SDK.

Here is an example of fetching a person from an HTTP API using the Modus SDK:

<CodeGroup>

```go Go

```

```ts AssemblyScript

```

</CodeGroup>

### GraphQL

GraphQL is a data-centric query language for APIs that allows you to fetch only the data you need.
With the `graphql` APIs in the Modus SDK, you can easily fetch data from any GraphQL endpoint.

Here is an example of fetching a person from a GraphQL API using the Modus SDK:

<CodeGroup>

```go Go
import github.com/hypermodeinc/modus/sdk/go/pkg/graphql

// the name of the GraphQL connection, as specified in the modus.json manifest
const hostName = "my-graphql-api"

type Person struct {
  FirstName string `json:"firstName,omitempty"`
  LastName  string `json:"lastName,omitempty"`
}

func QuerySpecificPerson(firstName, lastName string) (*Person, error) {
  statement := `query queryPeople($firstName: String!, $lastName: String!) {
    people: queryPerson(
      first: 1,
      filter: { firstName: { eq: $firstName }, lastName: { eq: $lastName } }
    ) {
      id
      firstName
      lastName
    }
  }`

  vars := map[string]any{
    "firstName": firstName,
    "lastName":  lastName,
  }

  response, err := graphql.Execute[PeopleData](hostName, statement, vars)
  if err != nil {
    return nil, err
  }

  if len(response.Data.People) == 0 {
    return nil, nil // Person not found
  }

  return response.Data.People[0], nil
}
```

```ts AssemblyScript
import { graphql } from "@hypermode/modus-sdk-as"

// the name of the GraphQL connection, as specified in the modus.json manifest
const hostName: string = "my-graphql-api"

@json
class Person {
  id: string | null = null
  firstName: string = ""
  lastName: string = ""
}

export function querySpecificPerson(firstName: string, lastName: string): Person | null {
  const statement = `query queryPeople($firstName: String!, $lastName: String!) {
    people: queryPerson(
        first: 1,
        filter: { firstName: { eq: $firstName }, lastName: { eq: $lastName } }
    ) {
        id
        firstName
        lastName
    }
  }`

  const vars = new graphql.Variables()
  vars.set("firstName", firstName)
  vars.set("lastName", lastName)

  const response = graphql.execute<PeopleData>(hostName, statement, vars)

  if (!response.data) return null

  const people = response.data!.people

  if (people.length === 0) return null
  return people[0]
}
```

</CodeGroup>
