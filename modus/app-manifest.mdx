---
title: App Manifest
description: "Define your models and hosts"
---

The manifest for your Modus app allows you to configure the exposure and resources for your functions at runtime. You
define the manifest in the `modus.json` file within the root of your project directory.

<CardGroup cols={2}>
  <Card title="Endpoints" icon="message-plus" href="#endpoints">
    Expose your functions for integration into your frontend or federated API
  </Card>
  <Card title="Connections" icon="server" href="#hosts">
    Establish connectivity for external endpoints and model hosts
  </Card>
  <Card title="Models" icon="message-plus" href="#models">
    Define inference services for use in your functions
  </Card>
  <Card title="Collections" icon="server" href="#collections">
    Define groups of text data to enable natural language search
  </Card>
</CardGroup>

## Hosts

Hosts establish connectivity to external services. They're used for HTTP and GraphQL APIs, database connections, and
externally hosted AI models. The `hosts` object in the app manifest allows you to define these hosts, for secure access
from within a function.

Each host requires a unique name, specified as a key containing only alphanumeric characters and hyphens.

Each host has a `type` property, which controls how it's used and which additional properties are available. The
following table lists the available host types:

| Type         | Purpose                          | Functions Namespaces        |
| :----------- | :------------------------------- | :-------------------------- |
| `http`       | Connect to an HTTP(S) web server | `http`, `graphql`, `models` |
| `postgresql` | Connect to a PostgreSQL database | `postgresql`                |
| `dgraph`     | Connect to a Dgraph database     | `dgraph`                    |

<Warning>
### Caution

Don't include secrets directly in the manifest!

If your host requires authentication, you can include _placeholders_ in host properties which resolve to their
respective secrets at runtime. Set the actual secrets via the Hypermode Console, where they're securely stored until
needed.

</Warning>

### HTTP host

This host type supports the HTTP and HTTPS protocols to communicate with external hosts. You can use the
[HTTP APIs](/modus/sdk/http) in the Functions SDK to interact with the host.

This host type is also used for [GraphQL APIs](/modus/sdk/graphql) and to invoke externally hosted AI
[models](/modus/sdk/models).

**Example:**

```json hypermode.json
{
  "hosts": {
    "openai": {
      "baseUrl": "https://api.openai.com/",
      "headers": {
        "Authorization": "Bearer {{API_KEY}}"
      }
    }
  }
}
```

<ResponseField name="type" type="string">
  Always set to `"http"` for this host type. This is the default if not specified.
</ResponseField>

<ResponseField name="baseUrl" type="string" required>
  Base URL for connections to the host.
  - Must end with a trailing slash.
  - May contain path segments if necessary.

Example: `"https://api.example.com/v1/"`

</ResponseField>

<ResponseField name="endpoint" type="string" required>
  Full URL endpoint for connections to the host.

Example: `"https://models.example.com/v1/classifier"`

</ResponseField>

<Note>
  You must include either a `baseUrl` or an `endpoint`, but not both.
  - Use `baseUrl` for connections to a host with a common base URL.
  - Use `endpoint` for connections to a specific URL.

Typically, you'll use the `baseUrl` field. However, some APIs, such as `graphql.execute`, require the full URL in the
`endpoint` field.

</Note>

<ResponseField name="headers" type="object">
  If provided, requests to the host include these headers. Each key-value pair is a header name and value.

Values may include variables using the `{{VARIABLE}}` template syntax, which resolve at runtime to secrets provided for
each host, via the Hypermode Console.

  <Accordion title="Examples">

This example specifies a header named `Authorization` that uses the `Bearer` scheme. A secret named `AUTH_TOKEN`
provides the token:

```json
"headers": {
  "Authorization": "Bearer {{AUTH_TOKEN}}"
}
```

This example specifies a header named `X-API-Key` provided by a secret named `API_KEY`:

```json
"headers": {
  "X-API-Key": "{{API_KEY}}"
}
```

You can use a special syntax for hosts that require
[HTTP basic authentication](https://en.wikipedia.org/wiki/Basic_access_authentication). In this example, secrets named
`USERNAME` and `PASSWORD` combined and then are base64-encoded to form a compliant `Authorization` header value:

```json
"headers": {
  "Authorization": "Basic {{base64(USERNAME:PASSWORD)}}"
}
```

  </Accordion>
</ResponseField>

<ResponseField name="queryParameters" type="object">
  If provided, requests to the host include these query parameters, appended to the URL. Each key-value pair is a parameter name and value.

Values may include variables using the `{{VARIABLE}}` template syntax, which resolve at runtime to secrets provided for
each host, via the Hypermode Console.

  <Accordion title="Example">

This example specifies a query parameter named `key` provided by a secret named `API_KEY`:

```json
"queryParameters": {
  "key": "{{API_KEY}}"
}
```

  </Accordion>
</ResponseField>

### PostgreSQL host

This host type supports connecting to PostgreSQL databases. You can use the [PostgreSQL APIs](/modus/sdk/postgresql) in
the Functions SDK to interact with the database.

**Example:**

```json hypermode.json
{
  "hosts": {
    "my-database": {
      "type": "postgresql",
      "connString": "postgresql://{{PG_USER}}:{{PG_PASSWORD}}@db.example.com:5432/data?sslmode=require"
    }
  }
}
```

<ResponseField name="type" type="string" required>
  Always set to `"postgresql"` for this host type.
</ResponseField>

<ResponseField name="connString" type="string" required>
  The connection string for the PostgreSQL database.

Values may include variables using the `{{VARIABLE}}` template syntax, which resolve at runtime to secrets provided for
each host, via the Hypermode Console.

The connection string in the preceding example includes:

- A username and password provided by secrets named `PG_USER` & `PG_PASSWORD`
- A host named `db.example.com` on port `5432`
- A database named `data`
- SSL mode set to `require` - which is highly recommended for secure connections

Refer to [the PostgreSQL documentation](https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING) for
more details on connection strings.

<Tip>

Managed PostgreSQL providers often provide a pre-made connection string for you to copy. Check your provider's
documentation for details.

For example, if using Neon, refer to the [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app).

</Tip>

</ResponseField>

### Dgraph host

This host type supports connecting to Dgraph databases. You can use the [Dgraph APIs](/modus/sdk/dgraph) in the
Functions SDK to interact with the database.

**Example:**

```json hypermode.json
{
  "hosts": {
    "my-dgraph": {
      "type": "dgraph",
      "grpcTarget": "frozen-mango.grpc.eu-central-1.aws.cloud.dgraph.io:443",
      "key": "{{DGRAPH_API_KEY}}"
    }
  }
}
```

<ResponseField name="type" type="string" required>
  Always set to `"dgraph"` for this host type.
</ResponseField>

<ResponseField name="grpcTarget" type="string" required>
  The gRPC target for the Dgraph database.
</ResponseField>

<ResponseField name="key" type="string" required>
  The API key for the Dgraph database.
</ResponseField>

## Models

AI models are a core resource for inferencing. The `models` object in the app manifest allows you to easily define
models, whether hosted by Hypermode or another host.

```json hypermode.json
{
  "models": {
    "text-generator": {
      "sourceModel": "meta-llama/Llama-3.1-8B-Instruct",
      "provider": "hugging-face",
      "host": "hypermode"
    }
  }
}
```

Each model requires a unique name, specified as a key, containing only alphanumeric characters and hyphens.

### Models properties

<ResponseField name="sourceModel" type="string" required>
  Original relative path of the model within the provider's repository.
</ResponseField>

<ResponseField name="host" type="string" required>
  Host for the model instance.

- Specify `"hypermode"` for models that are automatically deployed by Hypermode.
- Otherwise, specify a name that matches a host defined in the [`hosts`](#hosts) section of the manifest.

</ResponseField>

<ResponseField name="provider" type="string">
  Source provider of the model. `hugging-face` is currently the only supported option.
</ResponseField>

<ResponseField name="path" type="string">
  Path to the model endpoint, applied to the `baseUrl` of the host.
</ResponseField>

<ResponseField name="dedicated" type="boolean">
  Set to `true` to use a dedicated instance of the model for your project. Defaults to `false`.
</ResponseField>

### Auto-deployed models

When using `hugging-face` as the `provider` and `hypermode` as the `host`, Hypermode automatically deploys a dedicated
instance of the defined `sourceModel` when deploying your project. Your project's functions securely connect to the
hosted model, with no further configuration required.

## Collections

Collections are a key integration aspect with [models](#models) to create smart, searchable text. The `collections`
object in the app manifest allows you to define groupings of text and functions to embed inserted text with.

```json hypermode.json
{
  "collections": {
    // This defines a collection of products, having two search methods.
    "myProducts": {
      "searchMethods": {
        "searchMethod1": {
          // The embedder is the name of the function that will be used to generate vector embeddings.
          // By default, it uses a sequential index.
          "embedder": "embed"
        },

        // This is an example of a second search method.
        // It could use a different embedder or index type, if desired.
        "searchMethod2": {
          "embedder": "embed",
          "index": {
            "type": "sequential"
          }
        }
      }
    }
  }
}
```

Each collection requires a unique name, specified as a key, containing only alphanumeric characters and hyphens.

### Collections properties

<ResponseField name="searchMethods" type="object">
  If provided, adds an index on top of the collection. Each key-value pair is a
  search method and values.

  <ResponseField name="embedder" type="string">
  An exported function name used by the search method to embed text in the collection. Function must have a call signature with input `string[]` and return type `f32[][]`.

  <Accordion title="Examples">
  This example specifies a `searchMethod` with an embedder named `embed`

```json
"searchMethod1": {
  "embedder": "embed"
}
```

  </Accordion>

  </ResponseField>

  <ResponseField name="index" type="string">
  If provided, describes the index mechanism used by the search method. `type`: specifies the type of the index. For example, `sequential` (default).

  <Accordion title="Examples">
  This example specifies a `searchMethod` with an embedder named `embed` and an index with type `sequential`

```json
"searchMethod1": {
  "embedder": "embed"
  "index": {
    "type": "sequential"
  }
}
```

  </Accordion>

  </ResponseField>
</ResponseField>
